(()=>{const e=document.getElementById("dynamic_inp"),t=document.getElementById("inp-results");if(!window.WebSocket)return;const n=`${("https:"===window.location.protocol?"wss://":"ws://")+window.location.host}/suggestqueries`,o=new WebSocket(n);e.oninput=function(){t.innerHTML="",function({value:e},t){const n=e;if(!function(e){return 0!==e.replace(/([^\w]|_)/g,"").length}(n))return;window.___currentWsMsg__=n,t.send(n)}(this,o)},o.onopen=(e=>{console.log(e)}),o.onmessage=(e=>{t.innerHTML="",_msg=e.data,t.style.display="block";try{var n=JSON.parse(_msg);if(n["no-res"])return}catch(e){return void console.log(e)}const o=n.data;console.log(`Response Cached:${n.Cached}`);for(const e of o){const n=document.createElement("div"),o=document.createElement("span");n.setAttribute("data-im",e.id),n.onclick=function(){Beacon.send("/collect/",{type:"movieclick",data:[{movie:e.movie,query:window.___currentWsMsg__}],ua:navigator.userAgent,touch:navigator.maxTouchPoints>0}),window.location=`/movie/${this.getAttribute("data-im")}/watch/`},n.style.cursor="pointer",n.style.userSelect="none",n.style.listStyle="none",n.style.width="45%",n.style.fontSize="small",n.className="sock-res",n.appendChild(o),n.style.margin="auto",o.innerHTML=e.movie,t.appendChild(n),n.style.textAlign="left",n.style.border="2px solid #e3e3e3",n.style.borderRadius="5px"}}),window.onclick=(({target:e})=>{"input_n"!==e.className&&"sock-res"!==e.className&&e!=t&&(t.innerHTML="")})})();